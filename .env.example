# SmartRecon-AI Environment Configuration

# =============================================================================
# DATABASE
# =============================================================================
DATABASE_URL=postgresql://smartrecon:smartrecon_pass@db:5432/smartrecon
DATABASE_POOL_SIZE=20
DATABASE_MAX_OVERFLOW=10

# =============================================================================
# REDIS
# =============================================================================
REDIS_URL=redis://redis:6379/0
CELERY_BROKER_URL=redis://redis:6379/1
CELERY_RESULT_BACKEND=redis://redis:6379/2

# =============================================================================
# SECURITY & AUTHENTICATION
# =============================================================================
JWT_SECRET=your-super-secret-jwt-key-change-in-production
JWT_ALGORITHM=HS256
JWT_EXPIRATION_HOURS=24
API_KEY_HEADER=X-API-Key

# Admin user (created on first startup)
ADMIN_EMAIL=admin@smartrecon.local
ADMIN_PASSWORD=changeme123
ADMIN_USERNAME=admin

# =============================================================================
# LLM CONFIGURATION
# =============================================================================
LLM_PROVIDER=openai  # Options: openai, gemini, groq, local

# OpenAI
OPENAI_API_KEY=sk-your-openai-api-key
OPENAI_MODEL=gpt-4-turbo
OPENAI_MAX_TOKENS=4096
OPENAI_TEMPERATURE=0.3

# Google Gemini
GEMINI_API_KEY=your-gemini-api-key
GEMINI_MODEL=gemini-pro

# Groq
GROQ_API_KEY=your-groq-api-key
GROQ_MODEL=mixtral-8x7b-32768

# Local Models (Ollama)
LOCAL_MODEL_URL=http://ollama:11434
LOCAL_MODEL_NAME=llama2

# LLM Behavior
LLM_MAX_RETRIES=3
LLM_TIMEOUT=60
LLM_ENABLE_CACHING=true

# =============================================================================
# RECON TOOL CONFIGURATION
# =============================================================================

# General settings
MAX_CONCURRENT_SCANS=5
DEFAULT_TIMEOUT=3600  # seconds
DEFAULT_RATE_LIMIT=10  # requests per second
MAX_SUBDOMAIN_RESULTS=10000

# Amass
AMASS_TIMEOUT=3600
AMASS_MAX_DNS_QUERIES=10000

# Subfinder
SUBFINDER_TIMEOUT=1800
SUBFINDER_SOURCES=all

# HTTPX
HTTPX_THREADS=50
HTTPX_TIMEOUT=10
HTTPX_RETRIES=2

# FFUF
FFUF_THREADS=40
FFUF_TIMEOUT=900
FFUF_WORDLIST=/usr/share/wordlists/dirbuster/directory-list-2.3-medium.txt

# Nuclei
NUCLEI_CONCURRENCY=25
NUCLEI_RATE_LIMIT=150
NUCLEI_TIMEOUT=3600
NUCLEI_TEMPLATES_DIR=/root/nuclei-templates

# Katana
KATANA_CONCURRENCY=10
KATANA_DEPTH=3
KATANA_TIMEOUT=1800

# =============================================================================
# SCOPE & COMPLIANCE
# =============================================================================

# Blocklists (comma-separated)
BLOCKED_TLD=.gov,.mil,.edu
BLOCKED_IP_RANGES=10.0.0.0/8,172.16.0.0/12,192.168.0.0/16,169.254.0.0/16

# Authorization
REQUIRE_EXPLICIT_AUTHORIZATION=true
ENABLE_SCOPE_VALIDATION=true

# =============================================================================
# API SERVER
# =============================================================================
API_HOST=0.0.0.0
API_PORT=8000
API_WORKERS=4
API_RELOAD=false  # Set to true for development
API_LOG_LEVEL=info

# CORS
CORS_ORIGINS=http://localhost:3000,http://localhost:8000
CORS_ALLOW_CREDENTIALS=true

# Rate limiting (per IP)
RATE_LIMIT_PER_MINUTE=60
RATE_LIMIT_BURST=10

# =============================================================================
# CELERY WORKERS
# =============================================================================
CELERY_WORKER_CONCURRENCY=4
CELERY_WORKER_PREFETCH_MULTIPLIER=4
CELERY_TASK_SOFT_TIME_LIMIT=3600
CELERY_TASK_HARD_TIME_LIMIT=7200
CELERY_TASK_MAX_RETRIES=3

# =============================================================================
# REPORTING
# =============================================================================
REPORTS_DIR=/app/reports
REPORT_RETENTION_DAYS=90
ENABLE_PDF_EXPORT=true
ENABLE_HTML_EXPORT=true
ENABLE_MARKDOWN_EXPORT=true

# PDF generation
WKHTMLTOPDF_PATH=/usr/bin/wkhtmltopdf

# =============================================================================
# MONITORING & OBSERVABILITY
# =============================================================================
ENABLE_METRICS=true
METRICS_PORT=9090
PROMETHEUS_MULTIPROC_DIR=/tmp/prometheus

# Logging
LOG_LEVEL=INFO  # DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_FORMAT=json  # json or text
LOG_FILE=/var/log/smartrecon/app.log

# Sentry (optional)
SENTRY_DSN=
SENTRY_ENVIRONMENT=production

# =============================================================================
# STORAGE
# =============================================================================
STORAGE_BACKEND=local  # local, s3, gcs
STORAGE_PATH=/app/storage

# S3 (if using S3)
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_S3_BUCKET=smartrecon-storage
AWS_S3_REGION=us-east-1

# =============================================================================
# FRONTEND
# =============================================================================
NEXT_PUBLIC_API_URL=http://localhost:8000
NEXT_PUBLIC_WS_URL=ws://localhost:8000
NEXT_PUBLIC_APP_NAME=SmartRecon-AI
NEXT_PUBLIC_VERSION=1.0.0

# =============================================================================
# DEVELOPMENT
# =============================================================================
DEBUG=false
TESTING=false
SEED_DATABASE=false

# =============================================================================
# NOTIFICATIONS (OPTIONAL)
# =============================================================================
ENABLE_NOTIFICATIONS=false

# Slack
SLACK_WEBHOOK_URL=
SLACK_CHANNEL=#recon-alerts

# Discord
DISCORD_WEBHOOK_URL=

# Email
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=
SMTP_PASSWORD=
SMTP_FROM=noreply@smartrecon.ai

# =============================================================================
# INTEGRATIONS (OPTIONAL)
# =============================================================================

# JIRA
JIRA_URL=
JIRA_USERNAME=
JIRA_API_TOKEN=
JIRA_PROJECT_KEY=

# GitHub
GITHUB_TOKEN=
GITHUB_REPO=

# =============================================================================
# ADVANCED
# =============================================================================

# Elasticsearch (optional, for advanced search)
ELASTICSEARCH_URL=
ELASTICSEARCH_INDEX=smartrecon-findings

# Container registry (for tool images)
DOCKER_REGISTRY=docker.io
RECON_TOOLS_IMAGE=smartrecon/tools:latest

# Kubernetes (if deploying to K8s)
K8S_NAMESPACE=smartrecon
K8S_JOB_TTL=86400
